# OpenSource_Homework
## XEN在开源虚拟化中的意义
### 虚拟化技术分类：  
1.模拟:emulation //底层架构和虚拟架构可以不一样
    Qemu,PearPC,Bochs  
2.完全虚拟化:full virtulation,native virtulation
    //虚拟架构要和host架构一致，或者兼容。
    多数指令可以直接运行在CPU上,特权指令需要VMM进行翻译或者调用hyper call实现
    HVM:借助于硬件辅助
        之前：VMM捕获所有指令，本地转换，返回给guest。后来二进制翻译加速了该过程
        之后：CPU增加了一个环，VMM直接运行在ring -1,guest.kernel运行在ring 0上,guest.kernel发起特权指令，会直接发送给host.kernel,不需要VMM捕获
    VMware workstation,VirtualBox,VMware Server,Paralels
    kvm,xen  
3.半虚拟化,准虚拟化：paraVirtulization
    guest.kernel需要修改,知道自己运行在虚拟化环境中
    Hypercall:发起，从而操作硬件。
    Xen,UML  
4.OS级别的虚拟化 //系统辅助虚拟化
    用户空间的虚拟化
    容器级别虚拟化:Docker
    //将用户空间切割为多份，每一份各自独立
    OpenVZ,LXC(linux container),libcontainer,Virtuzzo,Liux V Servers
    依赖于名称空间划分，技术：两个空间同时启用http进程，会使用同一个端口80  
5.库级别虚拟化
    wine,Cywin
### XEN模型：
  Xen是由剑桥大学计算机实验室开发的一个开源项目。是一个直接运行在计算机硬件之上的用以替代操作系统的软件层，它能够在计算机硬件上并发的运行多个客户操作系统（Guest OS）。目前已经在开源社区中得到了极大的推动。
Xen支持x86、x86-64、安腾( Itanium)、Power PC和ARM多种处理器，因此Xen可以在大量的计算设备上运行，目前Xen支持Linux、NetBSD、FreeBSD、Solaris、 Windows和其他常用的操作系统作为客户操作系统在其管理程序上运行。   
  在Xen使用的方法中，没有指令翻译。这是通过两种方法之一实现的。第一，使用一个能理解和翻译虚拟操作系统发出的未修改指令的CPU（此方法称作完全虚拟化或full virtualization）。另一种，修改操作系统，从而使它发出的指令最优化，便于在虚拟化环境中执行（此方法称作准虚拟化或paravirtualization）。　   
  在Xen环境中，主要有两个组成部分。一个是虚拟机监控器（VMM），也叫hypervisor。Hypervisor层在硬件与虚拟机之间，是必须最先载入到硬件的第一层。Hypervisor载入后，就可以部署虚拟机了。在Xen中，虚拟机叫做“domain”。在这些虚拟机中，其中一个扮演着很重要的角色，就是domain0，具有很高的特权。通常，在任何虚拟机之前安装的操作系统才有这种特权。    
  Domain0要负责一些专门的工作。由于hypervisor中不包含任何与硬件对话的驱动，也没有与管理员对话的接口，这些驱动就由domain0来提供了。通过domain0，管理员可以利用一些Xen工具来创建其它虚拟机（Xen术语叫domainU）。这些domainU也叫无特权domain。这是因为在基于i386的CPU架构中，它们绝不会享有最高优先级，只有domain0才可以。   
  在domain0中，还会载入一个xend进程。这个进程会管理所有其它虚拟机，并提供这些虚拟机控制台的访问。在创建虚拟机时，管理员使用配置程序与domain0直接对话。
  ###  性能比较
  Denali使用准虚拟化技术来提高x86电脑上虚拟机的性能。Denali的虚拟机为因特网服务专门支持了最小化的操作系统。系统可以运行上千虚拟机。Xen与Denali不同，因为它试图运行适当数量的完整操作系统，而非大量轻量级操作系统。
VMware为x86提供虚拟机，这些虚拟机可以运行未修改的PC操作系统。所涉及的技术极为复杂，也导致了性能的（有时相当显著）下降。Xen牺牲了完全的二进制兼容，换取相对的简易性和改善的性能。
KVM在全虚拟化情况下性能优于Xen，但Xen在运行修改过的操作系统时效率更高。
###  应用领域
Xen凭着独特的虚拟化性能优势赢得了越来越的广泛应用。被用户充分应用在以下领域：  
服务器应用整合：在虚拟机范围内，在一台物理主机上虚拟出多台服务器, 以安装多个不同的应用，充分利用服务器的物理性能，灵活进行服务器的应用迁移。  
软件开发测试：用户可利用Linux的低成本优势非常灵活地搭建多个应用系统开发平台，由此节省了大量的开发成本，加快了开发进程。  
集群运算：和单独的管理每个物理主机相比较,虚拟机管理更加灵活,同时在负载均衡方面,更易于控制和隔离。  
多操作系统配置：以开发和测试为目的，同时运行多个操作系统；  
内核开发：在虚拟机的沙盒中，做内核的测试和调试，无需为了测试而单独架设一台独立的机器；  
为客户操作系统提供硬件技术支持：可以开发新的操作系统, 以得益于现存操作系统的广泛硬件支持,比如Linux；  
